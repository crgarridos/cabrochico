---
import type { ImageMetadata } from "astro";
import { Image } from 'astro:assets';
import Layout from "../layouts/Layout.astro";
import Modal from "../components/Modal.astro";
import ImageModal from "../components/ImageModal.astro";

const IMGS = [
    "../assets/img/cc-four-pink.jpeg",
    "../assets/img/revenga cover.png",
    "../assets/img/flyers/20220916.jpeg",
    "../assets/img/cc-four.jpeg",
    "../assets/img/cc-four-pink.jpeg",
    "../assets/img/revenga cover.png",
    "../assets/img/cc-four.jpeg",
    "../assets/img/cc-four-pink.jpeg",
    "../assets/img/revenga cover.png",
    "../assets/img/cc-four.jpeg",
    "../assets/img/cc-four-pink.jpeg",
    "../assets/img/revenga cover.png",
];
const IMAGES = import.meta.glob<{ default: ImageMetadata }>(
    "/src/assets/img/*.{webp,jpeg,jpg,png,gif}"
);

const PATHS = Object.keys(IMAGES)

function hashCode(str) {
    return str
        .split("")
        .reduce(
            (prevHash, currVal) =>
                ((prevHash << 5) - prevHash + currVal.charCodeAt(0)) | 0,
            0
        );
}
---

<Layout title="Gallery">
    <h1 class="text-3xl font-bold text-center">PHOTOS ðŸ“¸</h1>
    <section class="grid gap-4 place-items-center mt-8 place-content-center">
        <ImageModal />
        {
            PATHS.map((path) => (
                <button class="image-container thumbnail" data-url={path}>
                    <Image src={IMAGES[path]()} alt="" class="block opacity-0 transition-opacity" onload="this.style.opacity=1" loading="eager" />
                </button>
            ))
        }
    </section>
</Layout>

<style>
    section {
        animation: resize 200ms;
        display: grid;
        grid-template-columns: repeat(auto-fill, 140px);
    }
    .thumbnail {
        width: 100%;
        height: 100%;
        transition: scale 250ms;
        overflow: hidden;
    }

    .thumbnail:hover {
        scale: 1.05;
    }
    img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>
