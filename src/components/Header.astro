---
import ExternalLinks from "../components/ExternalLinks.astro";
import { BASE } from "../constants.js";

const pages = [
    { name: "Home", href: "/" },
    { name: "Bio", href: "/bio" },
    { name: "Gallery", href: "/gallery" },
    { name: "Concerts", href: "/concerts" },
    // { name: "Goodies", href: "/goodies" },
    { name: "Contact", href: "/contact" },
].map((page) => ({
    ...page,
    active:
        Astro.url.pathname === BASE + page.href ||
        Astro.url.pathname === BASE + page.href + "/" ||
        Astro.url.pathname === BASE && page.href === "/" // workaround for root routing in prod
}));
---

<header class="grid place-content-center mx-auto p-6">
    <nav
        class="group hidden md:flex h-full w-full items-center justify-between px-10 lg:justify-center"
    >
        <!-- TODO responsive nav -->
        {
            pages.map(({ name, href, active }, key) => (
                <>
                    <a
                        href={BASE + href}
                        class:list={[
                            "nav-item relative h-full select-none mx-2 flex-col items-center justify-center gap-1 text-center text-xl uppercase lg:flex lg:px-7 xl:px-10",
                            { "current-page text-[#8ec526]": active },
                            { "text-white": !active },
                        ]}
                        id={`nav-link-${key}`}
                    >
                        <span class="z-10">{name}</span>
                    </a>
                    {key === 2 && <div class:list={"w-64"} />}
                </>
            ))
        }
    </nav>
    <a href={BASE}>
        <img
        class="mx-auto my-12"
        src=`${BASE}/img/cabrochico.svg`
        alt="Logo CABROCHICO"
        />
    </a>
    <p class="text-center text-white font-semibold">
        Somos cabrochico y queremos jugar!
    </p>
    <ExternalLinks />
</header>

<style>
    img {
        max-width: 75%;
        width: 450px;
        height: auto;
    }
    a {
    }

    /* MEnu */

    .nav-item .background {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        background: linear-gradient(
            to bottom,
            rgba(221, 221, 221, 20%) 0%,
            transparent 100%
        );
        transition: opacity 0.3s;
    }

    .nav-item:hover .background,
    .nav-item:focus .background {
        opacity: 1;
    }

    .nav-item {
        accent-color: #8ec526;
    }

    .accent-drop-shadow {
        filter: drop-shadow(0px 0px 25px rgba(var(--color-accent-rgb), 0.25));
    }

    .current-page {
    }
    .current-page:before {
        background: var(--color-accent);
        width: 100%;
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        height: 8px;
    }

    .current-page-mob:before {
        background: var(--color-accent);
        width: 10px;
        content: "";
        position: absolute;
        top: 50%;
        left: -20px;
        height: 10px;
        border-radius: 100%;
        transform: translateY(-50%);
    }

    .gridBottomBarContainer {
        grid-template-columns: 1fr 6rem 1fr;
        grid-template-rows: 4px;
    }

    @media (min-width: 1024px) {
        .gridBottomBarContainer {
            grid-template-columns: repeat(auto-fill);
        }
    }
    @media (prefers-reduced-motion) {
        .nav-item .background {
            transition: opacity 0s;
        }

        .nav-item:hover .background,
        .nav-item:focus .background {
            opacity: 1;
        }
    }
</style>
